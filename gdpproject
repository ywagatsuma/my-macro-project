!pip install pandas_datareader

import pandas as pd
import pandas_datareader.data as web
import matplotlib.pyplot as plt
import statsmodels.api as sm
import pandas_datareader as pdr
import numpy as np

# set the start and end dates for the data
start_date = '1978-01-01'
end_date = '2022-01-01'

# download the data from OECD using pandas_datareader
series_id = 'CLVMNACNSAB1GQNO'
gdp = web.DataReader(series_id, 'fred', start_date, end_date)
log_gdp = np.log(gdp)

# apply a Hodrick-Prescott filter to the data to extract the cyclical component
cycle, trend = sm.tsa.filters.hpfilter(log_gdp, lamb=1600)

# Plot the original time series data
plt.plot(log_gdp, label="Original GDP (in log)")

# Plot the trend component
plt.plot(trend, label="Trend")

# Add a legend and show the plot
plt.legend()
plt.show()

## graph for different lambda values
lambdas = [10, 100, 1600]
trends = {}
cycles = {}

for lam in lambdas:
    cycle, trend = sm.tsa.filters.hpfilter(log_gdp, lamb=lam)
    trends[lam] = trend
    cycles[lam] = cycle

# plot original data and lambda
plt.figure(figsize=(12, 6))
plt.plot(log_gdp, label="Log Real GDP", color='gray', linewidth=1)
for lam in lambdas:
    plt.plot(trends[lam], label=f"Trend (Î» = {lam})")
    
plt.title("logGDP and lambda comparison")
plt.xlabel("year")
plt.ylabel("logGDP")
plt.legend()
plt.grid(True)
plt.tight_layout()
plt.show()


